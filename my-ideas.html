<!DOCTYPE html>
<html lang="ru" class="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <!-- SEO Meta Tags -->
    <title>–ú–æ–∏ –°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –ò–¥–µ–∏ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ | AutoIdea - smartflow.kg</title>
    <meta name="description" content="–£–ø—Ä–∞–≤–ª—è–π—Ç–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–º–∏ –∏–¥–µ—è–º–∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –±–∏–∑–Ω–µ—Å–∞ –æ—Ç smartflow.kg. –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–π—Ç–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –∏ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è –¥–ª—è –≤–∞—à–µ–≥–æ –±–∏–∑–Ω–µ—Å–∞ –≤ –ö—ã—Ä–≥—ã–∑—Å—Ç–∞–Ω–µ." />
    <meta name="keywords" content="—Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –∏–¥–µ–∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏, smartflow.kg, n8n –ø—Ä–æ–µ–∫—Ç—ã, –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –ö—ã—Ä–≥—ã–∑—Å—Ç–∞–Ω" />
    <meta name="author" content="smartflow.kg" />
    <meta name="robots" content="noindex, follow" />
    <link rel="canonical" href="https://smartflow.kg/my-ideas.html" />
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://smartflow.kg/my-ideas.html" />
    <meta property="og:title" content="–ú–æ–∏ –°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –ò–¥–µ–∏ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ | smartflow.kg" />
    <meta property="og:description" content="–£–ø—Ä–∞–≤–ª—è–π—Ç–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–º–∏ –∏–¥–µ—è–º–∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –±–∏–∑–Ω–µ—Å–∞. –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è –æ—Ç smartflow.kg" />
    <meta property="og:image" content="https://smartflow.kg/images/og-smart-flow.jpg" />
    <meta property="og:locale" content="ru_RU" />
    <meta property="og:site_name" content="smartflow.kg" />
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:url" content="https://smartflow.kg/my-ideas.html" />
    <meta name="twitter:title" content="–ú–æ–∏ –°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –ò–¥–µ–∏ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ | smartflow.kg" />
    <meta name="twitter:description" content="–£–ø—Ä–∞–≤–ª—è–π—Ç–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–º–∏ –∏–¥–µ—è–º–∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –±–∏–∑–Ω–µ—Å–∞ –æ—Ç smartflow.kg" />
    <meta name="twitter:image" content="https://smartflow.kg/images/og-smart-flow.jpg" />
    
    <!-- Additional Meta Tags -->
    <meta name="theme-color" content="#8B5CF6" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    
    <!-- Favicon -->
    <link rel="icon" href="images/favicon.ico" type="image/x-icon" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        darkMode: 'class',
        theme: {
          extend: {
            colors: {
              light: {
                bg: '#F3F4F6', card: '#FFFFFF', text: '#111827', textSecondary: '#6B7280',
                primary: '#6D28D9', primaryLight: '#8B5CF6', border: '#E5E7EB',
                danger: '#EF4444', success: '#10B981',
              },
              dark: {
                bg: '#111827', card: '#1F2937', text: '#F9FAFB', textSecondary: '#9CA3AF',
                primary: '#8B5CF6', primaryLight: '#A78BFA', border: '#374151',
                danger: '#F87171', success: '#34D399',
              },
            },
          },
        },
      };
    </script>
    <script src="https://unpkg.com/lucide@0.395.0/dist/umd/lucide.min.js"></script>
    <style>
      ::-webkit-scrollbar { width: 6px; }
      ::-webkit-scrollbar-thumb { background-color: rgba(156, 163, 175, 0.5); border-radius: 3px; }
    </style>
  </head>
  <body class="bg-gradient-to-b from-light-bg to-white dark:from-dark-bg dark:to-gray-900 min-h-screen">
    
    <div class="w-full max-w-4xl mx-auto px-4 py-6">
      <!-- –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –±—Ä–µ–Ω–¥–æ–≤–∞—è —à–∞–ø–∫–∞ -->
      <div class="mb-4 pb-3 border-b border-light-border/50 dark:border-dark-border/50">
        <a href="/" class="inline-flex items-center gap-2 text-sm hover:opacity-80 transition-opacity group">
          <svg class="w-4 h-4 transition-colors" style="color: #6B7280;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
          </svg>
          <img src="images/logo.png" alt="SMART flow logo" style="height: 20px; vertical-align: middle;">
          <span style="font-size: 1rem; font-weight: 600; color: #0EC1FF; text-decoration: none; transition: opacity 0.2s;">smartflow.kg</span>
        </a>
      </div>
      
      <!-- –®–∞–ø–∫–∞ -->
      <div class="flex items-center justify-between mb-8">
        <div>
          <h1 class="text-3xl font-bold text-light-text dark:text-dark-text">–ú–æ–∏ –ò–¥–µ–∏</h1>
          <p class="text-light-textSecondary dark:text-dark-textSecondary mt-1">–°–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –∏–¥–µ–∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏</p>
        </div>
        <div class="flex gap-2">
          <a href="autoidea.html" class="flex items-center gap-2 px-4 py-2 bg-light-primary dark:bg-dark-primary text-white rounded-lg hover:opacity-90 transition-opacity">
            <i data-lucide="plus" style="width:20px;height:20px;"></i>
            <span>–ù–æ–≤–∞—è –∏–¥–µ—è</span>
          </a>
        </div>
      </div>

      <!-- –ü—É—Å—Ç–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ -->
      <div id="empty-state" class="text-center py-20 hidden">
        <div class="mb-6 opacity-30">
          <i data-lucide="lightbulb-off" style="width:80px;height:80px;" class="mx-auto text-light-textSecondary dark:text-dark-textSecondary"></i>
        </div>
        <h2 class="text-2xl font-bold text-light-text dark:text-dark-text mb-2">–ü–æ–∫–∞ –Ω–µ—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö –∏–¥–µ–π</h2>
        <p class="text-light-textSecondary dark:text-dark-textSecondary mb-6">–ù–∞—á–Ω–∏—Ç–µ —Å —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–π –∏–¥–µ–∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏</p>
        <a href="autoidea.html" class="inline-flex items-center gap-2 px-6 py-3 bg-light-primary dark:bg-dark-primary text-white rounded-lg font-semibold hover:opacity-90 transition-opacity">
          <i data-lucide="sparkles" style="width:20px;height:20px;"></i>
          <span>–°–æ–∑–¥–∞—Ç—å –∏–¥–µ—é</span>
        </a>
      </div>

      <!-- –°–µ—Ç–∫–∞ –∫–∞—Ä—Ç–æ—á–µ–∫ -->
      <div id="ideas-grid" class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <!-- –ö–∞—Ä—Ç–æ—á–∫–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
      </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ -->
    <div id="idea-detail-modal" class="fixed inset-0 z-50 bg-light-bg dark:bg-dark-bg opacity-0 pointer-events-none transition-opacity duration-300 w-full max-w-md mx-auto" style="display: none;">
      <div class="h-full flex flex-col">
        <div class="pt-6 bg-light-card dark:bg-dark-card shadow-md z-20 flex-shrink-0">
          <div class="flex justify-between items-center p-4 border-b border-light-border dark:border-dark-border">
            <button id="detail-modal-close" class="hover:opacity-70 transition-opacity z-30"><i data-lucide="x" class="text-light-primary dark:text-dark-primary"></i></button>
            <p id="detail-modal-header-title" class="text-lg font-bold flex-1 mx-4 truncate text-light-text dark:text-dark-text text-center">–î–µ—Ç–∞–ª–∏ –ò–¥–µ–∏</p>
            <button id="detail-modal-delete" class="text-light-danger dark:text-dark-danger hover:opacity-80 transition-opacity z-30">
              <i data-lucide="trash-2"></i>
            </button>
          </div>
        </div>
        <div id="detail-modal-content" class="overflow-y-auto p-5 pb-10 flex-1"></div>
      </div>
    </div>

    <script type="module">
      let savedIdeas = [];
      let currentDetailIdea = null;

      function loadIdeas() {
        try {
          const stored = localStorage.getItem('saved_ideas');
          if (stored) {
            savedIdeas = JSON.parse(stored);
          }
        } catch (e) {
          console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–¥–µ–π:', e);
        }
        renderIdeas();
      }

      function saveIdeas() {
        try {
          localStorage.setItem('saved_ideas', JSON.stringify(savedIdeas));
        } catch (e) {
          console.error('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–¥–µ–π:', e);
        }
      }

      function deleteIdea(ideaId) {
        savedIdeas = savedIdeas.filter(i => i.id !== ideaId);
        saveIdeas();
        const modal = document.getElementById('idea-detail-modal');
        if (modal.style.display === 'flex') {
          closeModal();
        }
        renderIdeas();
        showNotification('–ò–¥–µ—è —É–¥–∞–ª–µ–Ω–∞');
      }
      
      function showNotification(message) {
        const notification = document.createElement('div');
        notification.className = 'fixed top-4 left-1/2 transform -translate-x-1/2 bg-light-success dark:bg-dark-success text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all';
        notification.innerText = message;
        document.body.appendChild(notification);
        
        setTimeout(() => {
          notification.style.opacity = '0';
          setTimeout(() => notification.remove(), 300);
        }, 2000);
      }
      
      async function exportIdeaToPDF(idea, includePlan = false) {
        showNotification('‚è≥ –°–æ–∑–¥–∞–Ω–∏–µ PDF...');
        
        const tools = Array.isArray(idea.tools) ? idea.tools : [];
        
        // –ü–æ–ª—É—á–∞–µ–º –ø–ª–∞–Ω –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
        let plan = null;
        if (includePlan) {
          showNotification('‚è≥ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–ª–∞–Ω–∞ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è...');
          plan = await generatePlanForPDF(idea);
        }
        
        // –°–æ–∑–¥–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–π HTML —ç–ª–µ–º–µ–Ω—Ç –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
        const container = document.createElement('div');
        container.style.cssText = 'position: absolute; left: -9999px; width: 794px; padding: 40px; background: white; font-family: Arial, sans-serif;';
        
        container.innerHTML = `
          <div style="margin-bottom: 30px;">
            <h1 style="color: #8B5CF6; font-size: 32px; margin-bottom: 10px; font-weight: bold;">AutoIdea</h1>
            <h2 style="color: #1F2937; font-size: 24px; margin-bottom: 20px; font-weight: bold; line-height: 1.4;">${idea.title}</h2>
            <div style="border-top: 3px solid #8B5CF6; margin: 20px 0;"></div>
          </div>
          
          <div style="margin-bottom: 20px;">
            <p style="color: #6B7280; font-size: 12px; font-weight: bold; margin-bottom: 8px;">–ò–ù–°–¢–†–£–ú–ï–ù–¢–´:</p>
            <p style="color: #374151; font-size: 14px; line-height: 1.6;">${tools.join(', ')}</p>
          </div>
          
          <div style="margin-bottom: 20px;">
            <p style="color: #6B7280; font-size: 12px; font-weight: bold; margin-bottom: 8px;">–û–ü–ò–°–ê–ù–ò–ï:</p>
            <p style="color: #374151; font-size: 14px; line-height: 1.8;">${idea.description}</p>
          </div>
          
          <div style="background: #F3F4F6; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
              <span style="color: #6B7280; font-size: 13px; font-weight: bold;">–°–ª–æ–∂–Ω–æ—Å—Ç—å:</span>
              <span style="color: #1F2937; font-size: 13px; font-weight: bold;">${idea.difficulty}</span>
            </div>
            <div style="display: flex; justify-content: space-between;">
              <span style="color: #6B7280; font-size: 13px; font-weight: bold;">–ë—é–¥–∂–µ—Ç:</span>
              <span style="color: #1F2937; font-size: 13px; font-weight: bold;">${idea.budget}</span>
            </div>
          </div>
          
          ${plan ? `
            <div style="page-break-before: always; margin-top: 40px;">
              <h3 style="color: #1F2937; font-size: 20px; margin-bottom: 15px; font-weight: bold;">–ü–ª–∞–Ω –≤–Ω–µ–¥—Ä–µ–Ω–∏—è</h3>
              <div style="color: #374151; font-size: 14px; line-height: 1.8;">${plan.replace(/\n/g, '<br>')}</div>
            </div>
          ` : ''}
          
          <div style="margin-top: 40px; text-align: center; color: #9CA3AF; font-size: 11px;">
            –°–æ–∑–¥–∞–Ω–æ —Å –ø–æ–º–æ—â—å—é AutoIdea
          </div>
        `;
        
        document.body.appendChild(container);
        
        try {
          const canvas = await html2canvas(container, {
            scale: 2,
            backgroundColor: '#ffffff',
            logging: false,
            useCORS: true
          });
          
          const { jsPDF } = window.jspdf;
          const imgWidth = 210;
          const imgHeight = (canvas.height * imgWidth) / canvas.width;
          
          const doc = new jsPDF('p', 'mm', 'a4');
          const imgData = canvas.toDataURL('image/png');
          
          let heightLeft = imgHeight;
          let position = 0;
          
          doc.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);
          heightLeft -= 297;
          
          while (heightLeft > 0) {
            position = heightLeft - imgHeight;
            doc.addPage();
            doc.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);
            heightLeft -= 297;
          }
          
          const fileName = `${idea.title.substring(0, 30).replace(/[^a-zA-Z–∞-—è–ê-–Ø0-9]/g, '_')}.pdf`;
          doc.save(fileName);
          showNotification('‚úÖ PDF —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω!');
        } catch (e) {
          console.error(e);
          showNotification('‚ùå –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è PDF');
        } finally {
          document.body.removeChild(container);
        }
      }
      
      async function generatePlanForPDF(idea) {
        const apiKey = "AIzaSyCCNrTE86_9kbXBs9OWIGHSSscZiCW9Qj8";
        
        if (!apiKey || apiKey === "–í–ê–®_API_–ö–õ–Æ–ß_–ó–î–ï–°–¨") {
          return "1. –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤\n2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤\n3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ\n4. –í–Ω–µ–¥—Ä–µ–Ω–∏–µ\n5. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è";
        }

        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;
        const tools = Array.isArray(idea.tools) ? idea.tools : [];
        const systemPrompt = `–¢—ã 'AutoIdea', –±–∏–∑–Ω–µ—Å-–∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç. –°–æ–∑–¥–∞–π –ø–æ—à–∞–≥–æ–≤—ã–π –ø–ª–∞–Ω –≤–Ω–µ–¥—Ä–µ–Ω–∏—è (5-7 —à–∞–≥–æ–≤). –û—Ç–≤–µ—á–∞–π –¢–û–õ–¨–ö–û —Ç–µ–∫—Å—Ç–æ–º, –±–µ–∑ HTML —Ç–µ–≥–æ–≤. –ö–∞–∂–¥—ã–π —à–∞–≥ —Å –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏, –Ω—É–º–µ—Ä–æ–≤–∞–Ω–Ω—ã–π. –Ø–∑—ã–∫: –†—É—Å—Å–∫–∏–π.`;
        const userPrompt = `–ò–¥–µ—è: ${idea.title}. –û–ø–∏—Å–∞–Ω–∏–µ: ${idea.description}. –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã: ${tools.join(', ')}.`;

        try {
          const response = await fetch(apiUrl, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
              contents: [{ role: "user", parts: [{ text: userPrompt }] }],
              systemInstruction: { parts: [{ text: systemPrompt }] },
            })
          });

          if (!response.ok) throw new Error('API Error');
          
          const data = await response.json();
          if (!data.candidates || !data.candidates[0].content.parts[0].text) {
            throw new Error("–ü—É—Å—Ç–æ–π –æ—Ç–≤–µ—Ç –æ—Ç API");
          }
          
          return data.candidates[0].content.parts[0].text.replace(/<[^>]*>/g, '');
        } catch (e) {
          console.error(e);
          return "1. –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤\n2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤\n3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ\n4. –í–Ω–µ–¥—Ä–µ–Ω–∏–µ\n5. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è";
        }
      }
      
      async function exportAllIdeasToPDF() {
        showNotification('‚è≥ –°–æ–∑–¥–∞–Ω–∏–µ PDF —Å–æ –≤—Å–µ–º–∏ –∏–¥–µ—è–º–∏...');
        
        // –°–æ–∑–¥–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
        const container = document.createElement('div');
        container.style.cssText = 'position: absolute; left: -9999px; width: 794px; padding: 40px; background: white; font-family: Arial, sans-serif;';
        
        let htmlContent = `
          <div style="text-align: center; padding: 100px 0;">
            <h1 style="color: #8B5CF6; font-size: 48px; margin-bottom: 20px; font-weight: bold;">AutoIdea</h1>
            <h2 style="color: #1F2937; font-size: 28px; margin-bottom: 40px;">–°–±–æ—Ä–Ω–∏–∫ –∏–¥–µ–π –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏</h2>
            <p style="color: #6B7280; font-size: 16px;">–í—Å–µ–≥–æ –∏–¥–µ–π: ${savedIdeas.length}</p>
            <p style="color: #6B7280; font-size: 16px;">–î–∞—Ç–∞: ${new Date().toLocaleDateString('ru-RU')}</p>
          </div>
          <div style="page-break-after: always;"></div>
        `;
        
        savedIdeas.forEach((idea, index) => {
          const tools = Array.isArray(idea.tools) ? idea.tools : [];
          
          htmlContent += `
            <div style="margin-bottom: 40px; ${index > 0 ? 'page-break-before: always; padding-top: 40px;' : ''}">
              <div style="color: #9CA3AF; font-size: 12px; margin-bottom: 15px;">–ò–¥–µ—è ${index + 1} –∏–∑ ${savedIdeas.length}</div>
              
              <h2 style="color: #1F2937; font-size: 24px; margin-bottom: 15px; font-weight: bold; line-height: 1.4;">${idea.title}</h2>
              <div style="border-top: 3px solid #8B5CF6; margin: 15px 0;"></div>
              
              <div style="margin-bottom: 15px;">
                <p style="color: #6B7280; font-size: 11px; font-weight: bold; margin-bottom: 6px;">–ò–ù–°–¢–†–£–ú–ï–ù–¢–´:</p>
                <p style="color: #374151; font-size: 13px; line-height: 1.6;">${tools.join(', ')}</p>
              </div>
              
              <div style="margin-bottom: 15px;">
                <p style="color: #6B7280; font-size: 11px; font-weight: bold; margin-bottom: 6px;">–û–ü–ò–°–ê–ù–ò–ï:</p>
                <p style="color: #374151; font-size: 13px; line-height: 1.7;">${idea.description}</p>
              </div>
              
              <div style="background: #F3F4F6; padding: 15px; border-radius: 8px;">
                <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                  <span style="color: #6B7280; font-size: 12px; font-weight: bold;">–°–ª–æ–∂–Ω–æ—Å—Ç—å:</span>
                  <span style="color: #1F2937; font-size: 12px; font-weight: bold;">${idea.difficulty}</span>
                </div>
                <div style="display: flex; justify-content: space-between;">
                  <span style="color: #6B7280; font-size: 12px; font-weight: bold;">–ë—é–¥–∂–µ—Ç:</span>
                  <span style="color: #1F2937; font-size: 12px; font-weight: bold;">${idea.budget}</span>
                </div>
              </div>
            </div>
          `;
        });
        
        htmlContent += `
          <div style="margin-top: 60px; text-align: center; color: #9CA3AF; font-size: 11px; border-top: 1px solid #E5E7EB; padding-top: 20px;">
            –°–æ–∑–¥–∞–Ω–æ —Å –ø–æ–º–æ—â—å—é AutoIdea
          </div>
        `;
        
        container.innerHTML = htmlContent;
        document.body.appendChild(container);
        
        try {
          const canvas = await html2canvas(container, {
            scale: 2,
            backgroundColor: '#ffffff',
            logging: false,
            useCORS: true
          });
          
          const { jsPDF } = window.jspdf;
          const imgWidth = 210;
          const imgHeight = (canvas.height * imgWidth) / canvas.width;
          
          const doc = new jsPDF('p', 'mm', 'a4');
          const imgData = canvas.toDataURL('image/png');
          
          let heightLeft = imgHeight;
          let position = 0;
          
          doc.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);
          heightLeft -= 297;
          
          while (heightLeft > 0) {
            position = heightLeft - imgHeight;
            doc.addPage();
            doc.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);
            heightLeft -= 297;
          }
          
          doc.save(`AutoIdea_–í—Å–µ_–ò–¥–µ–∏_${new Date().toLocaleDateString('ru-RU').replace(/\./g, '-')}.pdf`);
          showNotification('‚úÖ PDF —Å–æ –≤—Å–µ–º–∏ –∏–¥–µ—è–º–∏ —Å–æ–∑–¥–∞–Ω!');
        } catch (e) {
          console.error(e);
          showNotification('‚ùå –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è PDF');
        } finally {
          document.body.removeChild(container);
        }
      }

      function showShareModal(idea) {
        const tools = Array.isArray(idea.tools) ? idea.tools : [];
        const toolsList = tools.join(', ');
        
        const shareText = `üìå ${idea.title}

üìù –û–ø–∏—Å–∞–Ω–∏–µ:
${idea.description}

üõ†Ô∏è –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã: ${toolsList}
‚öôÔ∏è –°–ª–æ–∂–Ω–æ—Å—Ç—å: ${idea.difficulty}
üí∞ –ë—é–¥–∂–µ—Ç: ${idea.budget}

–°–æ–∑–¥–∞–Ω–æ —Å –ø–æ–º–æ—â—å—é AutoIdea`;
        
        const modal = document.createElement('div');
        modal.className = 'fixed inset-0 z-50 bg-black/60 flex items-center justify-center p-4';
        modal.innerHTML = `
          <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-md w-full p-6">
            <div class="flex justify-between items-center mb-4">
              <h3 class="text-xl font-bold text-light-text dark:text-dark-text">–ü–æ–¥–µ–ª–∏—Ç—å—Å—è –∏–¥–µ–µ–π</h3>
              <button class="close-share-modal hover:opacity-70">
                <i data-lucide="x" class="text-light-textSecondary dark:text-dark-textSecondary"></i>
              </button>
            </div>
            
            <div class="space-y-3">
              <button class="w-full py-3 px-4 bg-light-primary dark:bg-dark-primary text-white rounded-lg font-medium hover:opacity-90 transition-opacity flex items-center justify-center gap-2" id="copy-idea-btn">
                <i data-lucide="copy" style="width:18px;height:18px;"></i>
                <span>–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç</span>
              </button>
              
              <button class="w-full py-3 px-4 bg-blue-600 text-white rounded-lg font-medium hover:opacity-90 transition-opacity flex items-center justify-center gap-2" id="export-pdf-btn">
                <i data-lucide="file-text" style="width:18px;height:18px;"></i>
                <span>–≠–∫—Å–ø–æ—Ä—Ç –∫—Ä–∞—Ç–∫–æ–π –∏–¥–µ–∏ (PDF)</span>
              </button>
              
              <button class="w-full py-3 px-4 bg-purple-600 text-white rounded-lg font-medium hover:opacity-90 transition-opacity flex items-center justify-center gap-2" id="export-pdf-with-plan-btn">
                <i data-lucide="file-plus" style="width:18px;height:18px;"></i>
                <span>–≠–∫—Å–ø–æ—Ä—Ç —Å –ø–ª–∞–Ω–æ–º (PDF)</span>
              </button>
            </div>
          </div>
        `;
        
        document.body.appendChild(modal);
        lucide.createIcons();
        
        modal.querySelector('.close-share-modal').onclick = () => modal.remove();
        modal.onclick = (e) => { if (e.target === modal) modal.remove(); };
        
        document.getElementById('copy-idea-btn').onclick = async () => {
          try {
            await navigator.clipboard.writeText(shareText);
            showNotification('‚úÖ –¢–µ–∫—Å—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!');
            modal.remove();
          } catch (e) {
            alert('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç: ' + e.message);
          }
        };
        
        document.getElementById('export-pdf-btn').onclick = () => {
          exportIdeaToPDF(idea, false);
          modal.remove();
        };
        
        document.getElementById('export-pdf-with-plan-btn').onclick = async () => {
          modal.remove();
          await exportIdeaToPDF(idea, true);
        };
      }

      function renderIdeas() {
        const grid = document.getElementById('ideas-grid');
        const emptyState = document.getElementById('empty-state');
        
        if (savedIdeas.length === 0) {
          grid.innerHTML = '';
          emptyState.classList.remove('hidden');
          return;
        }
        
        emptyState.classList.add('hidden');
        grid.innerHTML = savedIdeas.map(idea => {
          const tools = Array.isArray(idea.tools) ? idea.tools : [];
          const toolsHtml = tools.map(t => 
            `<span class="bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 text-xs px-2 py-1 rounded-full">${t}</span>`
          ).join(' ');
          
          return `
            <div class="idea-card bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-light-border/50 dark:border-dark-border/50 relative group" data-idea-id="${idea.id}">
              <!-- –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π –≤ —É–≥–ª—É -->
              <div class="absolute top-4 right-4 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity">
                <button class="share-idea-btn p-2 bg-light-primary dark:bg-dark-primary text-white rounded-lg hover:opacity-80 transition-opacity z-10" data-idea-id="${idea.id}" title="–ü–æ–¥–µ–ª–∏—Ç—å—Å—è">
                  <i data-lucide="share-2" style="width:16px;height:16px;"></i>
                </button>
                <button class="delete-idea-btn p-2 bg-light-danger dark:bg-dark-danger text-white rounded-lg hover:opacity-80 transition-opacity z-10" data-idea-id="${idea.id}" title="–£–¥–∞–ª–∏—Ç—å">
                  <i data-lucide="trash-2" style="width:16px;height:16px;"></i>
                </button>
              </div>
              
              <div class="cursor-pointer" onclick="document.querySelector('[data-idea-id=\\\"${idea.id}\\\"]').click()">
                <div class="flex items-start justify-between mb-3">
                  <h3 class="text-xl font-bold text-light-text dark:text-dark-text flex-1 pr-16">${idea.title}</h3>
                  <i data-lucide="chevron-right" class="text-light-textSecondary dark:text-dark-textSecondary flex-shrink-0"></i>
                </div>
                
                <p class="text-light-textSecondary dark:text-dark-textSecondary text-sm mb-4 line-clamp-3">${idea.description}</p>
                
                <div class="flex flex-wrap gap-2 mb-4">
                  ${toolsHtml}
                </div>
                
                <div class="flex items-center justify-between text-sm pt-4 border-t border-light-border dark:border-dark-border">
                  <div class="flex items-center gap-4">
                    <span class="text-light-textSecondary dark:text-dark-textSecondary">
                      <i data-lucide="gauge" style="width:14px;height:14px;" class="inline mr-1"></i>
                      ${idea.difficulty}
                    </span>
                    <span class="text-light-textSecondary dark:text-dark-textSecondary">
                      <i data-lucide="dollar-sign" style="width:14px;height:14px;" class="inline mr-1"></i>
                      ${idea.budget}
                    </span>
                  </div>
                </div>
              </div>
            </div>
          `;
        }).join('');
        
        lucide.createIcons();
        
        // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–ª–∏–∫–∞ –¥–ª—è –∫–∞—Ä—Ç–æ—á–µ–∫
        document.querySelectorAll('.idea-card').forEach(card => {
          const innerDiv = card.querySelector('.cursor-pointer');
          if (innerDiv) {
            innerDiv.onclick = (e) => {
              e.stopPropagation();
              const ideaId = card.dataset.ideaId;
              const idea = savedIdeas.find(i => i.id === ideaId);
              if (idea) showIdeaDetail(idea);
            };
          }
        });
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ —É–¥–∞–ª–µ–Ω–∏—è
        document.querySelectorAll('.delete-idea-btn').forEach(btn => {
          btn.onclick = (e) => {
            e.stopPropagation();
            const ideaId = btn.dataset.ideaId;
            if (confirm('–£–¥–∞–ª–∏—Ç—å —ç—Ç—É –∏–¥–µ—é?')) {
              deleteIdea(ideaId);
            }
          };
        });
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ "–ü–æ–¥–µ–ª–∏—Ç—å—Å—è"
        document.querySelectorAll('.share-idea-btn').forEach(btn => {
          btn.onclick = (e) => {
            e.stopPropagation();
            const ideaId = btn.dataset.ideaId;
            const idea = savedIdeas.find(i => i.id === ideaId);
            if (idea) showShareModal(idea);
          };
        });
      }


      function showIdeaDetail(idea) {
        currentDetailIdea = idea;
        const modal = document.getElementById('idea-detail-modal');
        const content = document.getElementById('detail-modal-content');
        
        const tools = Array.isArray(idea.tools) ? idea.tools : [];
        const toolsHtml = tools.map(t => 
          `<span class="bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 text-xs px-2 py-1 rounded-full mr-1 mb-1">${t}</span>`
        ).join('');
        
        content.innerHTML = `
          <h2 class="text-2xl font-bold mb-4 text-light-text dark:text-dark-text">${idea.title}</h2>
          <div class="flex flex-wrap mb-4">${toolsHtml}</div>
          <p class="text-light-textSecondary dark:text-dark-textSecondary mb-6 leading-relaxed">${idea.description}</p>
          
          <div class="bg-light-bg dark:bg-dark-bg p-4 rounded-xl mb-4">
            <div class="flex justify-between text-sm mb-2">
              <span class="text-light-textSecondary dark:text-dark-textSecondary">–°–ª–æ–∂–Ω–æ—Å—Ç—å:</span>
              <span class="font-semibold text-light-text dark:text-dark-text">${idea.difficulty}</span>
            </div>
            <div class="flex justify-between text-sm">
              <span class="text-light-textSecondary dark:text-dark-textSecondary">–ë—é–¥–∂–µ—Ç:</span>
              <span class="font-semibold text-light-text dark:text-dark-text">${idea.budget}</span>
            </div>
          </div>
          
          <div class="bg-light-bg dark:bg-dark-bg p-4 rounded-xl mb-4">
             <h4 class="font-bold text-light-text dark:text-dark-text mb-3 flex items-center gap-2">
               <i data-lucide="info" style="width:18px;height:18px;"></i>
               –ü–æ–º–æ—â—å –≤ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
             </h4>
             <p class="text-sm text-light-textSecondary dark:text-dark-textSecondary mb-3">
               –ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å —Å –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ–º? –ú—ã –ø–æ–º–æ–∂–µ–º –≤–∞–º —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —ç—Ç—É –∏–¥–µ—é!
             </p>
             <div class="flex flex-col gap-2">
               <button id="get-consultation-btn" class="w-full py-3 bg-light-primary dark:bg-dark-primary text-white rounded-lg font-medium hover:opacity-90 transition-opacity flex items-center justify-center gap-2">
                 <i data-lucide="message-circle" style="width:18px;height:18px;"></i>
                 üí¨ –ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é
               </button>
               <button id="get-detailed-plan-btn" class="w-full py-3 bg-green-600 dark:bg-green-700 text-white rounded-lg font-medium hover:opacity-90 transition-opacity flex items-center justify-center gap-2">
                 <i data-lucide="file-text" style="width:18px;height:18px;"></i>
                 üìã –ó–∞–∫–∞–∑–∞—Ç—å –ø–æ–¥—Ä–æ–±–Ω—ã–π –ø–ª–∞–Ω
               </button>
             </div>
          </div>
        `;
        
        lucide.createIcons();
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –Ω–æ–≤—ã—Ö –∫–Ω–æ–ø–æ–∫
        const getConsultationBtn = document.getElementById('get-consultation-btn');
        const getDetailedPlanBtn = document.getElementById('get-detailed-plan-btn');
        
        if (getConsultationBtn) {
          getConsultationBtn.onclick = () => contactForImplementation(idea);
        }
        
        if (getDetailedPlanBtn) {
          getDetailedPlanBtn.onclick = () => showContactModal(idea);
        }
        
        openModal(modal);
      }
      
      // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ –∫–æ–Ω—Ç–∞–∫—Ç—ã
      function contactForImplementation(idea) {
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –≤—ã–±–æ—Ä–æ–º —Å–ø–æ—Å–æ–±–∞ —Å–≤—è–∑–∏
        const modal = document.createElement('div');
        modal.className = 'fixed inset-0 z-[60] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4';
        modal.innerHTML = `
          <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-md w-full">
            <div class="sticky top-0 bg-white dark:bg-gray-800 border-b border-light-border dark:border-dark-border p-4 flex justify-between items-center">
              <h3 class="text-xl font-bold text-light-text dark:text-dark-text">–°–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏</h3>
              <button onclick="this.closest('.fixed').remove()" class="text-light-textSecondary dark:text-dark-textSecondary hover:text-light-text dark:hover:text-dark-text">
                <i data-lucide="x" style="width:24px;height:24px;"></i>
              </button>
            </div>
            <div class="p-6">
              <p class="text-sm text-light-textSecondary dark:text-dark-textSecondary mb-4">
                –í—ã–±–µ—Ä–∏—Ç–µ —É–¥–æ–±–Ω—ã–π —Å–ø–æ—Å–æ–± —Å–≤—è–∑–∏ –¥–ª—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –ø–æ –∏–¥–µ–µ: <strong>"${idea.title}"</strong>
              </p>
              <div class="flex flex-col gap-3">
                <a href="https://t.me/it_pro_kg?text=${encodeURIComponent(`–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –ò–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏–¥–µ–∏: "${idea.title}"`)}" 
                   target="_blank" 
                   class="flex items-center gap-3 p-4 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors">
                  <i data-lucide="send" style="width:24px;height:24px;"></i>
                  <div class="flex-1 text-left">
                    <div class="font-semibold">Telegram</div>
                    <div class="text-sm opacity-90">@it_pro_kg</div>
                  </div>
                </a>
                
                <a href="https://wa.me/996555910352?text=${encodeURIComponent(`–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –ò–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏–¥–µ–∏: "${idea.title}"`)}" 
                   target="_blank" 
                   class="flex items-center gap-3 p-4 bg-green-500 hover:bg-green-600 text-white rounded-lg transition-colors">
                  <i data-lucide="message-circle" style="width:24px;height:24px;"></i>
                  <div class="flex-1 text-left">
                    <div class="font-semibold">WhatsApp</div>
                    <div class="text-sm opacity-90">+996 555 91 03 52</div>
                  </div>
                </a>
                
                <a href="https://www.instagram.com/smart.flow.kg" 
                   target="_blank" 
                   class="flex items-center gap-3 p-4 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white rounded-lg transition-colors">
                  <i data-lucide="instagram" style="width:24px;height:24px;"></i>
                  <div class="flex-1 text-left">
                    <div class="font-semibold">Instagram</div>
                    <div class="text-sm opacity-90">@smart.flow.kg</div>
                  </div>
                </a>
                
                <a href="tel:+996555910352" 
                   class="flex items-center gap-3 p-4 bg-gray-700 hover:bg-gray-800 text-white rounded-lg transition-colors">
                  <i data-lucide="phone" style="width:24px;height:24px;"></i>
                  <div class="flex-1 text-left">
                    <div class="font-semibold">–¢–µ–ª–µ—Ñ–æ–Ω</div>
                    <div class="text-sm opacity-90">+996 555 91 03 52</div>
                  </div>
                </a>
                
                <a href="mailto:demidovich.dm@gmail.com?subject=${encodeURIComponent(`–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è: ${idea.title}`)}&body=${encodeURIComponent(`–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ!\n\n–ò–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏–¥–µ–∏: "${idea.title}"`)}" 
                   class="flex items-center gap-3 p-4 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors">
                  <i data-lucide="mail" style="width:24px;height:24px;"></i>
                  <div class="flex-1 text-left">
                    <div class="font-semibold">Email</div>
                    <div class="text-sm opacity-90">demidovich.dm@gmail.com</div>
                  </div>
                </a>
              </div>
            </div>
          </div>
        `;
        
        document.body.appendChild(modal);
        lucide.createIcons();
      }
      
      // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ —Å —Ñ–æ—Ä–º–æ–π –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
      function showContactModal(idea) {
        const modal = document.createElement('div');
        modal.className = 'fixed inset-0 z-[60] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4';
        modal.innerHTML = `
          <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-y-auto">
            <div class="sticky top-0 bg-white dark:bg-gray-800 border-b border-light-border dark:border-dark-border p-4 flex justify-between items-center">
              <h3 class="text-xl font-bold text-light-text dark:text-dark-text">–ü–æ–ª—É—á–∏—Ç—å –ø–æ–¥—Ä–æ–±–Ω—ã–π –ø–ª–∞–Ω</h3>
              <button onclick="this.closest('.fixed').remove()" class="text-light-textSecondary dark:text-dark-textSecondary hover:text-light-text dark:hover:text-dark-text">
                <i data-lucide="x" style="width:24px;height:24px;"></i>
              </button>
            </div>
            <div class="p-6">
              <p class="text-sm text-light-textSecondary dark:text-dark-textSecondary mb-4">
                –û—Å—Ç–∞–≤—å—Ç–µ —Å–≤–æ–∏ –∫–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –∏ –º—ã –ø–æ–¥–≥–æ—Ç–æ–≤–∏–º –¥–ª—è –≤–∞—Å –¥–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏–¥–µ–∏ <strong>"${idea.title}"</strong> —Å —É—á–µ—Ç–æ–º —Å–ø–µ—Ü–∏—Ñ–∏–∫–∏ –≤–∞—à–µ–≥–æ –±–∏–∑–Ω–µ—Å–∞.
              </p>
              <form id="contactForm" class="flex flex-col gap-4">
                <div>
                  <label class="block mb-2 text-sm font-medium text-light-text dark:text-dark-text">–í–∞—à–µ –∏–º—è *</label>
                  <input type="text" id="contactName" required class="w-full px-4 py-2 bg-light-bg dark:bg-dark-bg border border-light-border dark:border-dark-border rounded-lg text-light-text dark:text-dark-text focus:ring-2 focus:ring-light-primary dark:focus:ring-dark-primary outline-none" placeholder="–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤">
                </div>
                <div>
                  <label class="block mb-2 text-sm font-medium text-light-text dark:text-dark-text">Telegram username *</label>
                  <input type="text" id="contactTelegram" required class="w-full px-4 py-2 bg-light-bg dark:bg-dark-bg border border-light-border dark:border-dark-border rounded-lg text-light-text dark:text-dark-text focus:ring-2 focus:ring-light-primary dark:focus:ring-dark-primary outline-none" placeholder="@username">
                </div>
                <div>
                  <label class="block mb-2 text-sm font-medium text-light-text dark:text-dark-text">Email (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</label>
                  <input type="email" id="contactEmail" class="w-full px-4 py-2 bg-light-bg dark:bg-dark-bg border border-light-border dark:border-dark-border rounded-lg text-light-text dark:text-dark-text focus:ring-2 focus:ring-light-primary dark:focus:ring-dark-primary outline-none" placeholder="email@example.com">
                </div>
                <div>
                  <label class="block mb-2 text-sm font-medium text-light-text dark:text-dark-text">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</label>
                  <textarea id="contactComment" rows="3" class="w-full px-4 py-2 bg-light-bg dark:bg-dark-bg border border-light-border dark:border-dark-border rounded-lg text-light-text dark:text-dark-text focus:ring-2 focus:ring-light-primary dark:focus:ring-dark-primary outline-none resize-none" placeholder="–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è..."></textarea>
                </div>
                <button type="submit" class="w-full py-3 bg-light-primary dark:bg-dark-primary text-white rounded-lg font-semibold hover:opacity-90 transition-opacity mt-2">
                  üì§ –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É
                </button>
              </form>
            </div>
          </div>
        `;
        
        document.body.appendChild(modal);
        lucide.createIcons();
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã
        document.getElementById('contactForm').addEventListener('submit', async (e) => {
          e.preventDefault();
          
          const contactData = {
            name: document.getElementById('contactName').value,
            telegram: document.getElementById('contactTelegram').value,
            email: document.getElementById('contactEmail').value,
            comment: document.getElementById('contactComment').value,
            idea: idea,
            timestamp: new Date().toISOString()
          };
          
          // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∫–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ Telegram
          await sendContactDataToTelegram(contactData);
          
          // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ
          modal.innerHTML = `
            <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-md w-full p-8 text-center">
              <div class="text-6xl mb-4">‚úÖ</div>
              <h3 class="text-2xl font-bold text-light-text dark:text-dark-text mb-3">–ó–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞!</h3>
              <p class="text-light-textSecondary dark:text-dark-textSecondary mb-6">
                –ú—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è –¥–ª—è –æ–±—Å—É–∂–¥–µ–Ω–∏—è –¥–µ—Ç–∞–ª–µ–π.
              </p>
              <button onclick="this.closest('.fixed').remove()" class="px-6 py-3 bg-light-primary dark:bg-dark-primary text-white rounded-lg font-semibold hover:opacity-90 transition-opacity">
                –ó–∞–∫—Ä—ã—Ç—å
              </button>
            </div>
          `;
          
          // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–∫—Ä—ã–≤–∞–µ–º —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
          setTimeout(() => modal.remove(), 3000);
        });
      }
      
      // –§—É–Ω–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∫–æ–Ω—Ç–∞–∫—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ Telegram
      async function sendContactDataToTelegram(contactData) {
        const BOT_TOKEN = "7722973835:AAHxR459EC5PlQANwEGzaIcY-ZLLyr_NEWA";
        const CHAT_ID = "1306863122";
        
        if (BOT_TOKEN === "YOUR_BOT_TOKEN_HERE" || CHAT_ID === "YOUR_CHAT_ID_HERE") {
          console.warn("Telegram bot –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∫–æ–Ω—Ç–∞–∫—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.");
          return;
        }
        
        const message = `
üî• –ó–ê–Ø–í–ö–ê –ù–ê –ü–û–î–†–û–ë–ù–´–ô –ü–õ–ê–ù (–∏–∑ –ú–æ–∏—Ö –ò–¥–µ–π)!

üë§ –ò–º—è: ${contactData.name}
üì± Telegram: ${contactData.telegram}
üìß Email: ${contactData.email || '–ù–µ —É–∫–∞–∑–∞–Ω'}

üí° –ò–Ω—Ç–µ—Ä–µ—Å—É—é—â–∞—è –∏–¥–µ—è:
"${contactData.idea.title}"

üìù –û–ø–∏—Å–∞–Ω–∏–µ –∏–¥–µ–∏:
${contactData.idea.description}

üõ† –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã: ${Array.isArray(contactData.idea.tools) ? contactData.idea.tools.join(', ') : '–ù–µ —É–∫–∞–∑–∞–Ω–æ'}
‚öôÔ∏è –°–ª–æ–∂–Ω–æ—Å—Ç—å: ${contactData.idea.difficulty}
üí∞ –ë—é–¥–∂–µ—Ç: ${contactData.idea.budget}

üìù –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫–ª–∏–µ–Ω—Ç–∞:
${contactData.comment || '–ù–µ —É–∫–∞–∑–∞–Ω'}

‚è∞ –î–∞—Ç–∞: ${new Date(contactData.timestamp).toLocaleString('ru-RU')}
        `.trim();
        
        try {
          await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
              chat_id: CHAT_ID,
              text: message,
              parse_mode: 'HTML'
            })
          });
          console.log("–ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –≤ Telegram");
        } catch (e) {
          console.error("–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∫–æ–Ω—Ç–∞–∫—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ Telegram:", e);
        }
      }

      function openModal(modal) {
        modal.classList.remove('pointer-events-none', 'opacity-0');
        modal.classList.add('opacity-100');
        modal.style.display = 'flex';
      }

      function closeModal() {
        const modal = document.getElementById('idea-detail-modal');
        modal.classList.add('pointer-events-none', 'opacity-0');
        modal.classList.remove('opacity-100');
        setTimeout(() => {
          modal.style.display = 'none';
        }, 300);
        currentDetailIdea = null;
      }

      function initApp() {
        document.getElementById('detail-modal-close').onclick = closeModal;
        document.getElementById('detail-modal-delete').onclick = () => {
          if (currentDetailIdea && confirm('–£–¥–∞–ª–∏—Ç—å —ç—Ç—É –∏–¥–µ—é?')) {
            deleteIdea(currentDetailIdea.id);
          }
        };
        
        loadIdeas();
        lucide.createIcons();
      }

      window.addEventListener('load', initApp);
    </script>
    
    <!-- Schema.org Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "CollectionPage",
      "name": "–ú–æ–∏ –°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –ò–¥–µ–∏ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏",
      "description": "–ö–æ–ª–ª–µ–∫—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –∏–¥–µ–π –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –æ—Ç smartflow.kg",
      "url": "https://smartflow.kg/my-ideas.html",
      "isPartOf": {
        "@type": "WebApplication",
        "name": "AutoIdea",
        "url": "https://smartflow.kg/autoidea.html",
        "provider": {
          "@type": "LocalBusiness",
          "name": "smartflow.kg",
          "url": "https://smartflow.kg/"
        }
      }
    }
    </script>
    
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "name": "smartflow.kg",
        "item": "https://smartflow.kg/"
      },{
        "@type": "ListItem",
        "position": 2,
        "name": "–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∏–¥–µ–π –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏",
        "item": "https://smartflow.kg/autoidea.html"
      },{
        "@type": "ListItem",
        "position": 3,
        "name": "–ú–æ–∏ –∏–¥–µ–∏",
        "item": "https://smartflow.kg/my-ideas.html"
      }]
    }
    </script>
    
    <!-- –ö–æ–º–ø–∞–∫—Ç–Ω—ã–π —Ñ—É—Ç–µ—Ä -->
    <footer class="mt-12 py-6 border-t border-light-border/30 dark:border-dark-border/30">
      <div class="w-full max-w-4xl mx-auto px-4">
        <div class="flex flex-col md:flex-row items-center justify-between gap-4 text-sm">
          <div class="flex items-center gap-2">
            <img src="images/logo.png" alt="smartflow.kg" style="height: 20px;">
            <span class="text-light-textSecondary dark:text-dark-textSecondary">&copy; 2025 smartflow.kg</span>
          </div>
          
          <div class="flex flex-wrap items-center justify-center gap-4 text-light-textSecondary dark:text-dark-textSecondary">
            <a href="tel:+996555910352" class="hover:text-purple-600 dark:hover:text-purple-400 transition-colors">
              üì± +996 555 91 03 52
            </a>
            <a href="https://t.me/it_pro_kg" target="_blank" class="hover:text-purple-600 dark:hover:text-purple-400 transition-colors">
              ‚úàÔ∏è Telegram
            </a>
            <a href="https://wa.me/996555910352" target="_blank" class="hover:text-purple-600 dark:hover:text-purple-400 transition-colors">
              üíö WhatsApp
            </a>
          </div>
          
          <a href="/privacy-policy.html" class="text-light-textSecondary dark:text-dark-textSecondary hover:text-purple-600 dark:hover:text-purple-400 transition-colors">
            –ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏
          </a>
        </div>
      </div>
    </footer>
  </body>
</html>
